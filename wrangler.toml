# TechBadges - Cloudflare Workers Configuration
# https://developers.cloudflare.com/workers/wrangler/configuration/

name = "techbadges"
main = "src/index.ts"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# Enable workers.dev subdomain
workers_dev = true

# Custom domain
route = { pattern = "techbadges.santosr.xyz/*", zone_id = "1e8f3f0b25d49caf7a9f12d7a263c6ef" }

# Observability (logging)
[observability]
enabled = true

# =============================================================================
# Production (default environment)
# =============================================================================
[vars]
ENVIRONMENT = "production"

# KV caching for production
# To create: bunx wrangler kv namespace create ICON_CACHE
# Then paste the id below
[[kv_namespaces]]
binding = "ICON_CACHE"
id = "6a4449cf3e6141cca5ba7245ee1d2caa"

# =============================================================================
# Staging environment (deploy with: bunx wrangler deploy --env staging)
# =============================================================================
[env.staging]
name = "techbadges-staging"
vars = { ENVIRONMENT = "staging" }

# KV caching for staging
# To create: bunx wrangler kv namespace create ICON_CACHE --env staging
# [[env.staging.kv_namespaces]]
# binding = "ICON_CACHE"
# id = "<paste-staging-kv-id-here>"

# =============================================================================
# Development environment (deploy with: bunx wrangler deploy --env development)
# =============================================================================
[env.development]
name = "techbadges-dev"
vars = { ENVIRONMENT = "development" }

# KV caching for development
# To create: bunx wrangler kv namespace create ICON_CACHE --env development
# [[env.development.kv_namespaces]]
# binding = "ICON_CACHE"
# id = "<paste-dev-kv-id-here>"
